#
# Copyright (C) 2019 VMware, Inc. All Rights Reserved.
#
# Licensed under the GNU General Public License v2 (the "License");
# you may not use this file except in compliance with the License. The terms
# of the License are located in the COPYING file of this distribution.
#

from distutils.core import setup, Extension
import os

link_args = []
cflags = []

if os.access('Makefile.am', os.F_OK):
    cflags.append('-I../include')
    link_args.extend(['-Wl,-L../client/.libs'])

tdnfmodule = Extension('tdnf._tdnf',
                    libraries = ['tdnf'],
                    sources = ['tdnfmodule.c',
                               'tdnfbase.c',
                               'utils.c'],

                    extra_compile_args = cflags,
                    extra_link_args = link_args)

setup (name = '@PACKAGE_NAME@-python',
       version = '@VERSION@',
       description = 'Python bindings for @PACKAGE_NAME@',
       packages = ['@PACKAGE_NAME@'],
       url='https://github.com/vmware/tdnf',
       ext_modules = [tdnfmodule])
